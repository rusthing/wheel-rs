//! # 命令行错误类型
//!
//! 定义了执行外部命令时可能发生的错误类型。

use std::io::Error;

/// # 命令执行错误枚举
///
/// 该枚举包含了执行外部命令时可能遇到的各种错误类型。
/// 使用 thiserror crate 提供错误信息的自动实现。
#[derive(Debug, thiserror::Error)]
pub enum CmdError {
    /// 命令执行失败错误
    ///
    /// 当无法启动命令或在设置命令执行环境时发生错误时返回此错误
    /// 包装了底层的 [`Error`]
    #[error("执行命令失败: {0}")]
    ExecuteFail(Error),
    /// 命令运行失败错误
    ///
    /// 当命令被执行但返回非零退出码时返回此错误
    /// 包含命令输出的错误信息
    #[error("运行命令失败: {0}")]
    RunFail(String),
    /// 杀死命令进程失败错误
    ///
    /// 当无法杀死命令进程时返回此错误
    /// 包装了底层的 [`Error`]
    #[error("杀死命令进程失败: {0}")]
    KillFail(Error),
    /// 获取命令输出失败错误
    ///
    /// 当无法获取命令输出时返回此错误
    /// 封装了底层的 [`String`]
    #[error("获取命令输出失败: {0}")]
    TakeStdoutError(String),
    /// 进程ID为空错误
    ///
    /// 当进程ID为空时返回此错误
    #[error("进程ID为空")]
    EmptyId,
}
